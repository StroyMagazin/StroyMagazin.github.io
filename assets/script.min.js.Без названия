function refreshPosition(){let e=$(".header-catalog-menu"),a=$(".header-catalog-menu-block"),o,t=e.find(".popup-catalog-menu-wr"),l=t.find(".popup-catalog-menu"),n=0,s=0,i=t.find(".popup-catalog-submenu"),d=0;0<a.length&&0<e.length&&(t.addClass("hidden"),o=a.outerWidth(!0),0<i.length&&i.height(0),0<l.length&&(n=l.width(),s=l.height()),o>n&&(d=Math.ceil(o-n)-15),0<i.length&&(i.width(d),i.height(s)),t.removeClass("hidden"))}function refreshAllSubmenu(){let a=$(".header-catalog-menu").find(".popup-catalog-menu-wr");if(0<a.length){a.addClass("hidden");let e=$(".header-catalog-menu").find(".popup-catalog-menu-wr").find(".popup-catalog-submenu").find(".popup-catalog-submenu-list").find(".popup-catalog-submenu-list-item");0<e.length&&($(".header-catalog-menu").find(".popup-catalog-menu-wr").find(".popup-catalog-submenu").find(".popup-catalog-submenu-list").find(".popup-catalog-submenu-list-item").each(function(){let e=$(this),a=e.find(">ul");0<e.length&&0<a.length&&(e.addClass("active"),a.isotope({masonry:{horizontalOrder:!1}}),e.removeClass("active"))}),e.removeClass("active"),e.eq(0).addClass("active")),a.removeClass("hidden")}}function refreshScrollInSubmenu(){let e=$(".header-catalog-menu").find(".popup-catalog-menu-wr").find(".popup-catalog-submenu").find(".popup-catalog-submenu-wrapper");0<e.length&&(e.scrollTop(0),void 0!==window.scrollBarInSubmenu?window.scrollBarInSubmenu.setPosition(0,0):window.scrollBarInSubmenu=Scrollbar.init(e.eq(0).get(0),{alwaysShowTracks:!0}),window.scrollBarInSubmenu.update(),window.scrollBarInSubmenu.track.xAxis.element.remove())}function refreshAdd2Basket(){var e={sessid:BX.bitrix_sessid()};$.ajax({url:"/ajax/get_products_in_basket.php",data:e,dataType:"json",type:"POST"}).done(function(e){let a=[],o=(e.hasOwnProperty("ITEMS")&&(a=e.ITEMS),$(".bx_item_detail")),t=0,l=!1,n=o.find("[data-idprod]"),s=(0<a.length&&0<o.length&&(0<(t=o.data("product-id")||0)&&-1!==$.inArray(t,a)&&(l=!0),0<n.length&&l&&(n.off(),n.attr("href","/personal/cart/"),n.addClass("active"),n.find("i").html("В корзине"))),0<n.length&&n.removeClass("disabled"),$(".bx_catalog_list_home")),i=!1,d=(t=0,l=!1,n=!1,0<s.length&&s.find(".bx_catalog_item").each(function(){i=$(this),t=0,l=!1,n=!1,t=i.data("id")||0,n=i.find("[data-idprod]"),0<(t=0===t?n.data("idprod")||0:t)&&-1!==$.inArray(t,a)&&(l=!0),0<n.length&&l&&(n.off(),n.attr("href","/personal/cart/"),n.addClass("active"),n.html("<i></i>В корзине")),0<n.length&&n.removeClass("disabled")}),$(".bx_catalog_table_home"));i=!1,t=0,l=!1,n=!1,0<d.length&&d.find(".item.main_item_wrapper").each(function(){i=$(this),t=0,l=!1,n=!1,0<(n=i.find(".bx_catalog_item_buy")).length&&(t=n.data("id")||0,(l=0<t&&-1!==$.inArray(t,a)?!0:l)&&(n.off(),n.attr("href","/personal/cart/"),n.addClass("active"),n.html("<i></i>В корзине"))),0<n.length&&n.removeClass("disabled")})})}$(document).ready(function(){console.log("from script.js");let e=$("[data-ajax-url]"),t=(0<e.length&&e.each(function(){let a=$(this);var e,o=a.data("ajax-url")||"";""!=o&&(e={sessid:BX.bitrix_sessid()},$.ajax({url:o,data:e,type:"GET"}).done(function(e){a.html(e)}))}),setTimeout(function(){refreshPosition(),refreshAllSubmenu(),refreshScrollInSubmenu(),$(".header-catalog-menu").find(".popup-catalog-menu-wr").find(".popup-catalog-menu").find(">li").on("mouseover",function(){let a=$(this),o,e=a.closest(".popup-catalog-menu"),t=a.closest(".header-catalog-menu"),l=t.find(".popup-catalog-menu-wr"),n=l.find(".popup-catalog-submenu"),s=n.find(".popup-catalog-submenu-list"),i=s.find(".popup-catalog-submenu-list-item"),d=e.find(">li");if(o=a.index(),0<i.length){let e=i.eq(o);0<e.length&&(i.removeClass("active"),e.addClass("active"),d.removeClass("item-selected"),a.addClass("item-selected"),refreshScrollInSubmenu())}})},1),$(window).on("resize",function(){setTimeout(function(){refreshPosition(),refreshAllSubmenu(),refreshScrollInSubmenu()},1e3)}),$(".delivery-tabs").find(".d-tabs__item").find(".d-tabs__item-name").on("click",function(){let e=$(this).closest(".d-tabs__item"),a=e.find(".custom-iframe");0<a.length&&a.each(function(){let e=$(this),a=$(this).attr("src")||"";e.hasClass("active")||0<a.length&&(e.attr("src",a),setTimeout(function(){e.addClass("active")},200))})}),refreshAdd2Basket(),$('[data-role="menu-button-mobile"]')),l=$('[data-role="menu-mobile"]'),n=$('.bx-overlay[data-role="menu-mobile"]');if(0<t.length&&0<l.length){t.on("click",function(){let e=$(this),a=$("body"),o=$('[data-role="bx-menu-button-mobile"]');0<o.length&&o.hasClass("bx-opened")&&o.trigger("click"),e.hasClass("bx-opened")?(e.removeClass("bx-opened"),l.removeClass("bx-opened"),n.removeClass("active"),e.addClass("bx-closed"),a.css("overflow","")):(e.addClass("bx-opened"),l.addClass("bx-opened"),n.addClass("active"),e.removeClass("bx-closed"),a.css("overflow","hidden"))});let e=l.find(".mobile-menu-close-button").children("i"),a=(e.on("click",function(){let e=$(this).closest('[data-role="menu-mobile"]'),a=$("body"),o=$('.bx-overlay[data-role="menu-mobile"]');t.removeClass("bx-opened"),e.removeClass("bx-opened"),o.removeClass("active"),t.addClass("bx-closed"),a.css("overflow","")}),l.find(".mobile-menu-catalog-button")),o=(a.on("click",function(){let e=$(this).closest('[data-role="menu-mobile"]'),a=$('[data-role="bx-menu-button-mobile"]'),o=$('.bx-overlay[data-role="menu-mobile"]');0<a.length&&(a.hasClass("bx-opened")||a.trigger("click"),t.removeClass("bx-opened"),e.removeClass("bx-opened"),o.removeClass("active"),t.addClass("bx-closed"))}),l.find("[data-mobile-callback]"));0<o.length&&o.on("click",function(){"undefined"!=typeof ComagicWidget&&"object"==typeof ComagicWidget&&void 0!==ComagicWidget.openSitePhonePanel&&"function"==typeof ComagicWidget.openSitePhonePanel&&ComagicWidget.openSitePhonePanel()})}let a=$(".catalog-mobile-menu-back-button");0<a.length&&a.on("click",function(){let e=$(this).closest("[data-role=bx-menu-mobile]"),a=$('[data-role="bx-menu-button-mobile"]'),o=$("body"),t=$('.bx-overlay[data-role="menu-mobile"]'),l=(0<e.length&&(e.removeClass("bx-opened"),e.addClass("bx-closed"),a.removeClass("bx-opened"),a.addClass("bx-closed")),$('[data-role="menu-button-mobile"]')),n=$('[data-role="menu-mobile"]');0<l.length&&0<n.length&&(l.hasClass("bx-opened")||(l.addClass("bx-opened"),n.addClass("bx-opened"),n.removeClass("bx-closed"),t.addClass("active"),l.removeClass("bx-closed"),o.css("overflow","hidden")))}),0<n.length&&n.on("click",function(){if(n.hasClass("active")){let e=$("body"),a=$('[data-role="menu-button-mobile"]');$('[data-role="menu-mobile"]');a.removeClass("bx-opened"),l.removeClass("bx-opened"),a.addClass("bx-closed"),e.css("overflow",""),n.removeClass("active")}}),$(".footer-mobile-menu-groups").find(".footer-mobile-menu-groups-item").find(".footer-mobile-menu-groups-item-title").on("click",function(){let e=$(this),a=e.closest(".footer-mobile-menu-groups-item"),o=a.hasClass("active"),t=a.find(".footer-mobile-menu-groups-item-content-wrapper");o?(e.removeClass("active"),t.slideUp("fast",function(){a.removeClass("active")})):(e.addClass("active"),t.slideDown("fast",function(){a.addClass("active")}))})});
//# sourceMappingURL=script.min.js.map
